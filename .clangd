Diagnostics:
  Suppress:
    # * Kernel headers sometimes expand to invalid tokens.
    - invalid_token_after_toplevel_declarator
    # * Avoid complaints about "incomplete type 'void'".
    - typecheck_decl_incomplete_type
    # * Old-style function declarations in kernel headers,
    - ident_list_in_fn_declaration
    # * Suppress errors from MODULE_* macros parsing.
    - missing_param

CompileFlags:
  Add:
    # * System include path for generic Linux headers.
    - -I/usr/include/linux
    # * Kernel build include path (points to your current kernel build headers).
    - -I/lib/modules/6.1.0-38-amd64/build/include
    # * Define that we're compiling inside the kernel.
    - -D__KERNEL__
    # * Enable module-specific code paths in kernel headers.
    - -DMODULE
    # * Make MODULE_* macros no-ops so clangd doesn't choke on them.
    - -DMODULE_LICENSE(x)=
    - -DMODULE_AUTHOR(x)=
    - -DMODULE_DESCRIPTION(x)=
    # * Match kernelâ€™s C standard (gnu89 instead of gnu11).
    - -std=gnu89
